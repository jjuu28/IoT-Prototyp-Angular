<header>
  <h1>Sensoren in {{ fieldName }}</h1>
  <button routerLink="/dashboard">â¬… ZurÃ¼ck zum Dashboard</button>
</header>

<div *ngIf="sensors.length > 0; else noSensors">
  <div class="sensor-list">
    <div *ngFor="let sensor of sensors" class="sensor-card">
      <h3>{{ sensor.valueName }} ({{ sensor.sensorId }})</h3>
      <p><strong>Letzter Wert:</strong> {{sensor.lastValueString}}</p>
      <p><strong>Feld:</strong> {{ sensor.field_name }}</p>
      <p><strong>Gruppe:</strong> {{ sensor.group_name }}</p>
      <p><strong>Standort:</strong> {{ sensor.location }}</p>
      <p><strong>Einheit:</strong> {{ sensor.unit }}</p>

      <!-- ğŸ†• Anzeige der Grenzwerte -->
      <div class="sensor-limits">
        <p><strong>Obere Grenze:</strong> {{ sensor.limitUpper }}</p>
        <p><strong>Untere Grenze:</strong> {{ sensor.limitLower }}</p>
        <button (click)="editSensorLimits(sensor)">Grenzen bearbeiten</button>
      </div>

      <!-- ğŸ†• Anzeige der Meldungen -->
      <div class="sensor-messages">
        <h4>ğŸš¨ Letzte Meldungen</h4>
        <ul>
          <li *ngFor="let msg of sensor.messages">
            {{ msg.text }} ({{ msg.date }})
          </li>
        </ul>
        <button (click)="deleteSensorMessage(sensor)">Meldungen lÃ¶schen</button>
      </div>
      <div class="sensor-data">
        <label>ğŸ“ Standort Ã¤ndern:</label>
        <input [(ngModel)]="sensor.newLocation" placeholder="Neuer Standort" />
        <button (click)="updateLocation(sensor)">Aktualisieren</button>
      </div>

      <!-- âœï¸ Feld Ã¤ndern -->
      <div class="sensor-data">
        <label>ğŸŒ¾ Feld Ã¤ndern:</label>
        <select [(ngModel)]="sensor.newFieldName">
          <option *ngFor="let field of allFields" [value]="field.field_name">{{ field.field_name }}</option>
        </select>
        <button (click)="updateField(sensor)">Aktualisieren</button>
      </div>
    </div>

  </div>
  </div>

<ng-template #noSensors>
  <p>âŒ Keine Sensoren in dieser Gruppe gefunden.</p>
</ng-template>
